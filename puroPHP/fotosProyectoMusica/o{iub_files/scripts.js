"use strict";angular.module("marketEditorAppInternal",["mgcrea.ngStrap.modal"]),angular.module("marketEditorAppDecorators",[]),angular.module("marketEditorAppECommerceDecorators",[]),angular.module("marketEditorAppRouting",["ui.router"]),angular.module("marketEditorTemplates",[]),angular.module("marketEditorApp",["ngSanitize","ngAnimate","lrInfiniteScroll","ipCookie","slick","marketEditorAppInternal","marketEditorAppRouting","marketEditorTemplates","reviewsPublic","wixTranslations","wixAngular","wix.common.thumbnailCarousel","wix.common.scrollPane","wix.common.wysiwygCleaner","wix.cdn.utils","wix.common.appFeatures","wix.common.bi","wix.common.cycleCarousel","wix.common.loadingIndicator","wix.common.appMarketStatics","wix.common.appMarketStatics.selectedMenuItem","wix.common.appMarketStatics.permissions","wix.common.appMarketStatics.appStats","marketEditorAppECommerceDecorators"]).constant({applicationsPerPageLimit:21,applicationsPerPageSearchLimit:20,applicationsLimitForNewPage:9,applicationsLimitForMostPopularPage:9,applicationsLimitForBestByWix:3,thumbnailSize:{width:62,height:47},pictureSize:{width:500,height:360},siteId:function(){var a=decodeURIComponent(location.href).match(/siteId=([a-z0-9-]+)/i);return a&&a[1]}(),bestAppsCategoryMap2014:[{bestSellers:{name:"bestApps.bestSellers",applicationsInCategory:["12aacf69-f3fb-5334-2847-e00a8f13c12f","13016589-a9eb-424a-8a69-46cb05ce0b2c","12bdee78-5f95-6247-38ed-ebc1601a8dcd","12f1fbab-8b9d-3002-87b5-2972897e8314","12ca2fd6-a4c9-b91f-ae6c-94868b2a8f1c","133c8e95-912a-8826-fa26-5a00a9bcf574"]}},{topFree:{name:"bestApps.topFree",applicationsInCategory:["1375baa8-8eca-5659-ce9d-455b2009250d","12a5a563-3b69-724b-e21e-6e03d190cf72","1379f52d-80e7-1a82-a251-2e09049d661c"]}},{trending:{name:"bestApps.trending",applicationsInCategory:["133bb11e-b3db-7e3b-49bc-8aa16af72cac","1360889d-0155-11cf-7146-19284f5addc2","138bd39e-f0a2-38ae-074b-eb0e597dc8cd"]}},{staffPicks:{name:"bestApps.staffPicks",applicationsInCategory:["135aad86-9125-6074-7346-29dc6a3c9bcf","13322a7c-6039-ac58-86e8-48b76f901d91","12e1488c-31d0-7c71-bd72-ce5398890fa4"]}}]}).config(["$windowProvider","mixPanelProjectKey","metaSiteId",function(a,b,c){a.$get().mixpanel.init(b),a.$get().mixpanel.register({metaSiteId:c,market_type:"editor"})}]).config(["reviewsRepositoryProvider","reviewsApiUrl",function(a,b){a.endpoint(b)}]).config(["experimentCheckerProvider","experiments",function(a,b){a.setExperiments(b)}]).config(["$translateProvider","lang",function(a,b){a.preferredLanguage(b)}]).config(["applicationRepositoryProvider","lang","experiments","apiEndpoint","appMarketApiUrl",function(a,b,c,d,e){a.setApiOrigin("true"===c["specs.NewApiEditor"]?e:d),a.setABCats(!1),a.setDashboard(!1),a.setFields("appDefinitionId,by,downloadsAllTime,externalPremium,featuredImage,featuredImageNew,frontPageImage,hasDashboard,hasMobile,hasPremium,isTrial,name,premiumOnly,publishedAt,slug,teaser,widgets,wixComponentId,isWixComponent,appType,hasSection,dashboard,overrideDashboardUrl,listWidgetId,price,supportInfo,upgradeBenefits,features,imageEditorCarousel3,hideAppFirstTimeMsg"),a.setLanguage(b)}]).config(["biUrl","biLoggerProvider","domBiLoggerProvider","runtimeInjectorProvider","metaSiteId","siteId",function(a,b,c,d,e,f){b.setConfig({biUrl:a,defaultEventArgs:{src:22,metasite_id:e,site_id:f},adapter:"apmrkt"}),c.setConfig({eventMap:{OPENED:{evid:11},CATEGORY_SELECTED:{evid:12},APP_OPENED:{evid:13},APP_TAB_SELECTED:{evid:15},APP_PERMISSIONS_OPENED:{evid:39,market_type:"editor-market"},APP_PERMISSIONS_ACCEPTED:{evid:34,market_type:"editor-market"},APP_PERMISSIONS_CLOSED:{evid:35,market_type:"editor-market"},APP_PERMISSIONS_TERMS:{evid:36,market_type:"editor-market"},APP_ADDED:{evid:14},APP_ADDED_SINGLE:{evid:14,origin:"site_selector"},SEARCHED:{evid:17},WS_ACTION_CLICKED:{evid:12,origin:"Welcome screen"},WS_CLOSED:{evid:20,value:"Closing welcome screen"},PENDING_REMOVED:{evid:30},WL_OPENED:{evid:37,market_type:"editor"},WL_SEND_CLICKED:{evid:38,market_type:"editor"},"2014_BACK_TO_MARKET":{evid:43,market_type:"editor"},"2014_CATEGORY_SELECTED":{evid:44,market_type:"editor"}},jQuery:$})}]).run(["runtimeInjector","$injector",function(a,b){a.setInjector(b)}]).run(["$location","biManager",function(a,b){var c=a.search().origin;c&&b.setLastOrigin(c)}]).run(["$rootScope","biManager",function(a,b){a.$on("$stateChangeSuccess",function(c,d,e,f,g){a.appMarketLoaded=!0,b.onStateChangeSuccess(c,d,e,f,g)})}]),angular.module("marketEditorAppInternal").controller("ApplicationCtrl",["$scope","$sce","$state","$stateParams","$translate","application","applicationTabsConfig","userDetails","biManager","domBiLogger","addToSite","applicationManager",function(a,b,c,d,e,f,g,h,i,j,k,l){a.app=f,a.app.hasPremiumPackage=a.app.hasPremium&&a.app.packages[0].is_active,a.tabs=g,a.trustedDemoUrl=b.trustAsResourceUrl(f.liveDemoUrl),a.reviewsTabUrl=c.href("application.reviews",{slug:f.slug}),a.userName=h,a.biParams=i.buildParamsForApplicationModal(c,d,f),j.log("APP_OPENED",i.buildParamsForApplication(c,d,f)),a.addApp=function(b){return k.add(b,a.biParams)},a.getTabNameKey=function(b){var c="application.tabs."+b+".name";return"features"!==b||a.app.hasPremiumPackage?c:c+"Alternative"},a.buildBiParams=function(b){return angular.extend({},a.biParams,b)},a.shareProperties={title:e.instant("application.share.title",{application:a.app.name}),text:a.app.teaser,url:"http://www.wix.com/app-market/"+a.app.slug+"/overview"},a.refreshReviews=function(){l.getReviews(a.app.appDefinitionId).then(function(b){a.app.reviews=b})}}]),angular.module("marketEditorAppInternal").controller("OverviewCtrl",["$scope","cdnUtils","thumbnailSize","pictureSize","experimentChecker",function(a,b,c,d,e){a.thumbnails=[],a.pictures=[],a.thumbnailsPerSlide=6,a.app.pictures.forEach(function(e){a.thumbnails.push({src:b.resize(e,c.width,c.height)}),a.pictures.push({src:b.resize(e,d.width,d.height)})})}]),angular.module("marketEditorAppInternal").controller("FeaturesCtrl",["$scope","applicationPrice",function(a,b){a.app.price=b.priceValue+" "+b.currencyCode}]),angular.module("marketEditorAppInternal").controller("SidebarCtrl",["$scope","$state","biManager","domBiLogger","applicationManager","categories","searchManager","pendingAppsManager",function(a,b,c,d,e,f,g,h){a.query=g.getQuery(),a.categories=f,c.setCategories(f),a.pendingAppsManager=h,d.log("OPENED",{pending:h.pendingApps.length}),h.pendingApps.length&&"page.single"!==b.current.name&&"page.search"!==b.current.name&&"page.developer-apps"!==b.current.name&&(c.setSkipNextStateChangeSuccessEvent(!1),b.go("page.pending")),a.search=g.search,a.hasDeveloperApplications=function(){return e.hasDeveloperApplications()}}]),angular.module("marketEditorAppInternal").controller("MainCtrl",["$scope","$state","$stateParams","$timeout","applicationsPerPageLimit","applications","applicationsLoader","promotedApplications","partitionFilter","biManager","experimentChecker","addToSite","appMarketStaticsUrl","popularApplications",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=f.length;a.appMarketStaticsUrl=m,a.biParams=j.buildParams(b,c),a.applications=f,a.popularApplications=n,a.loading=!1,a.loadedAll=a.applications.length<e,a.loadMoreApps=function(){a.loading||a.loadedAll||(a.loading=!0,g(e,o).then(function(b){a.applications.push.apply(a.applications,b),o+=b.length,a.loading=!1,a.loadedAll=b.length<e}))},a.promotedApplications=k.isEnabled("specs.FrontPageCarouselEditor")||k.isEnabled("specs.BestApps2014Editor")?h:i(h,2),a.addApp=function(b,c){var d=_.extend({},d,a.biParams,{app_id:b.appDefinitionId,app_name:b.name});c&&c.origin&&(d.origin=c.origin),l.add(b,d)},a.carouselLoading=!0,d(function(){a.carouselLoading=!(f&&f.length)})}]),angular.module("marketEditorAppInternal").controller("SearchCtrl",["$scope","$state","$stateParams","$window","suggestAnApp","applicationsPerPageSearchLimit","applications","allApplications","applicationsLoader","allApplicationsLoader","searchManager","wixModal","biManager","addToSite","domBiLogger","appMarketApi","experimentChecker",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(a){var b="specs.FuzzySearchSpec",e=q.getExperiments(),f={search_term:c.query,num_results:a||0,experiment:b,experimentValue:e[b],experimentRevision:2};p.getUserDetails().then(function(a){f.userName=a,d.mixpanel.track("Search",f)})}var s,t,u,v;a.query=c.query,a.biParams=m.buildParams(b,c),k.setQuery(c.query),g.totalResults>0?(a.applications=g.applications,a.totalResults=g.totalResults,a.searchResults=!0,t=i,o.log("SEARCHED",angular.extend({},m.getPreparedParams("SEARCHED"),{count:g.totalResults,app_id:g.applications[0].appDefinitionId})),r(g.totalResults)):(a.applications=h,a.searchResults=!1,t=j,o.log("SEARCHED",angular.extend({},m.getPreparedParams("SEARCHED"),{count:0,app_id:h[0].appDefinitionId})),r()),a.addApp=function(b,c){var d=_.extend({},a.biParams,{app_id:b.appDefinitionId,app_name:b.name});c&&c.origin&&(d.origin=c.origin),n.add(b,d)},a.suggestAnApp=_.partial(e.showSuggestionForm,!1),a.loading=!1,a.loadedAll=a.applications.length<f,s=a.applications.length,a.loadMoreApps=function(){a.loading||a.loadedAll||(a.loading=!0,u=t===i?t(c.query,f,s):t(f,s),u.then(function(b){v=b.applications||b,a.applications.push.apply(a.applications,v),s+=v.length,a.loading=!1,a.loadedAll=v.length<f}))},a.openInModal=function(a,c){l.openAppPopup(b.href("application."+c,{slug:a}),"search_results",900,625)}}]),angular.module("marketEditorAppInternal").controller("SingleCtrl",["$scope","appFlow","application","pendingAppsManager",function(a,b,c,d){d.loadPendingApplications().then(function(b){var d=_.filter(b,{appDefinitionId:c.appDefinitionId});a.applications=d.length>0?d:[c],a.appName=a.applications[0].name}),a.addApp=_.partialRight(b.add,"APP_ADDED_SINGLE"),a.addToSite={forceUse:!0}}]),angular.module("marketEditorAppInternal").controller("PendingCtrl",["$scope","$state","$stateParams","pendingAppsManager","biManager",function(a,b,c,d,e){a.pendingAppsManager=d,a.biParams=e.buildParams(b,c),a.biParamsPremium=angular.extend({},e.buildParams(b,c),{category:"pending_cart"}),a.$watchCollection("pendingAppsManager.pendingApps",function(a){0===a.length&&b.go("page.featured")}),a.add=_.bind(d.addPendingApplication,d),a.remove=_.bind(d.removePendingApplication,d)}]),angular.module("marketEditorAppInternal").controller("PermissionRequestCtrl",["$scope","$stateParams","application","appMarketApi","domBiLogger",function(a,b,c,d,e){var f={app_id:c.appDefinitionId};b.biOrigin&&(f.origin=b.biOrigin),b.biCategory&&(f.category=b.biCategory),b.biValue&&(f.value=b.biValue),e.log("APP_PERMISSIONS_OPENED",f),a.app=c,a.onClose=_.partial(e.log,"APP_PERMISSIONS_CLOSED",f,_.partial(d.closeModal,"cancel")),a.onTerms=_.partial(e.log,"APP_PERMISSIONS_TERMS",f),a.onAgree=_.partial(e.log,"APP_PERMISSIONS_ACCEPTED",f,function(){d.addApplication(a.app).then(function(){d.closeModal("add"),d.closeAppPopup()})})}]),angular.module("marketEditorAppInternal").controller("Best2014Ctrl",["$scope","$stateParams","domBiLogger","applicationManager","addToSite","bestAppsCategoryMap2014","applications",function(a,b,c,d,e,f,g){function h(a){return _.compact(["2014",b.category,a]).join("_")}a.bestApplications=_.extend({},f),a.biParams={category:h(),origin:"ed_market"},c.log("CATEGORY_SELECTED",{category:a.biParams.category}),a.scrollInto=function(b){c.log("2014_CATEGORY_SELECTED",{category:b}),a.biParams.category=h(b),$(".scroll-pane").animate({scrollTop:$("#"+b).offset().top-50+$("[wix-scroll-pane]").scrollTop()},300)},a.addApp=function(b,c){var d=_.extend({},d,a.biParams,{app_id:b.appDefinitionId,app_name:b.name});c&&c.origin&&(d.origin=c.origin),e.add(b,d)},_.forEach(a.bestApplications,function(a){_.forEach(a,function(a){if("object"==typeof a){var b=_.indexBy(_.filter(g,function(b){return b&&a.applicationsInCategory.indexOf(b.appDefinitionId)>-1}),"appDefinitionId");a.applications=[],a.applicationsInCategory.forEach(function(c){a.applications.push(b[c])})}})})}]),angular.module("marketEditorAppInternal").directive("autofocus",function(){return{restrict:"A",link:function(a,b){b[0].focus()}}}),angular.module("marketEditorAppInternal").directive("applicationGrid",["experimentChecker",function(a){return{templateUrl:"views/directives/application-grid.html",restrict:"EA",scope:{applications:"=",biParams:"=",onAdd:"&"},link:function(b,c){b.experiment=a,b.addApplication=function(a,c){b.onAdd({application:a,biParamsOverride:c})}}}}]),angular.module("marketEditorAppInternal").directive("newAppBoxesDesignHover",function(){function a(a){return b.createTween(function(){return a.data("tweenId")},function(b,c){var d=.5,e=.53*d,f=.47*d,g=a.find(".application-advert"),h=a.find(".application-mobile-icon"),i=a.find(".application-title"),j=a.find(".application-pricing"),k=a.find(".application-ratings"),l=a.find(".application-description"),m=a.find(".button-orange");c.to(g,e,{y:-29,ease:Power2.easeIn},0),c.to(g,f,{y:-86,ease:Power2.easeOut},e),c.to(h,e,{y:-29,ease:Power2.easeIn},0),c.to(h,f,{y:-85,ease:Power2.easeOut},e),c.to(i,e,{y:-29,ease:Power2.easeIn},0),c.to(i,f,{y:-85,ease:Power2.easeOut},e),c.to(j,e,{y:-29,ease:Power2.easeIn},0),c.to(j,f,{y:-85,ease:Power2.easeOut},e),c.to(k,e,{y:-29,opacity:0,ease:Power2.easeIn},0),c.to(l,e,{y:-49,ease:Power2.easeIn},0),c.to(l,f,{y:-119,ease:Power2.easeOut},e),c.to(m,e,{y:-49,ease:Power2.easeIn},0),c.to(m,f,{y:-120,ease:Power2.easeOut},e),a.data("tweenId",b)},function(){a.data("tweenId",null)})}var b=function(){var a=0,b=[];return{createTween:function(c,d,e){var f=c();if(f||(f=++a),!b[f]){var g=b[f]=new TimelineLite({onReverseComplete:e,paused:!0});d(f,g)}return b[f]}}}();return{restrict:"A",link:function(b,c,d){c.on("mouseenter",".application.new-app-hover-button",function(){a(angular.element(this)).play(),this.style.webkitTransform="scale(1)"}),c.on("mouseleave",".application.new-app-hover-button",function(){a(angular.element(this)).reverse()})}}}),angular.module("marketEditorAppInternal").directive("openInModal",["$parse","biManager","experimentChecker","wixModal",function(a,b,c,d){return{priority:-1,restrict:"A",link:function(c,e,f){e.on("click",function(g){g.stopImmediatePropagation(),g.preventDefault();var h=e[0].hash||e[0].href,i=906,j=625,k={origin:b.getBiOrigin()};f.modalParams&&(k=_.defaults(a(f.modalParams)(c),k)),d.openAppPopup(h,k,f.modalWidth||i,f.modalHeight||j)})}}}]),angular.module("marketEditorAppInternal").directive("welcomeScreen",["$location","$state","biManager","ipCookie",function(a,b,c,d){return{templateUrl:"views/directives/welcome-screen.html",restrict:"E",link:function(e,f,g){var h="appmWelcomeScreen";return g.showOnlyOnState&&b.$current.name!==g.showOnlyOnState?void f.hide():(d(h)?f.hide():d(h,!0,{domain:a.host().split(".").slice(-2).join("."),expires:365}),e.close=function(){f.hide()},void(e.skipNextStateChangeSuccessEvent=function(){c.setSkipNextStateChangeSuccessEvent(!0)}))}}}]),angular.module("marketEditorAppInternal").filter("partition",function(){return function(a,b){var c,d=[];if(0===b)return d;for(var e=0;e<a.length;e++)e%b===0&&d.push(c=[]),c.push(a[e]);return d}}),angular.module("marketEditorAppInternal").provider("runtimeInjector",function(){function a(){this.setInjector=function(a){b=a}}var b;this.getInjector=function(){return b},this.$get=function(){return new a}}),angular.module("marketEditorAppDecorators").config(["$provide",function(a){a.decorator("applicationRepository",["$delegate","wysiwygCleaner",function(a,b){var c=a.getApplication;return a.getApplication=function(a){return c(a).then(function(a){return angular.forEach(["description","developerInfo"],function(c){a[c]&&(a[c]=b.cleanHtml(a[c]))}),a})},a}])}]),angular.module("marketEditorAppECommerceDecorators").config(["$provide",function(a){a.decorator("applicationRepository",["$delegate","$location",function(a,b){function c(a){var c=b.absUrl().match(a+"=([^&#]+)");return c?c[1]:void 0}var d="true"===c("newWixStores"),e="1380b703-ce81-ff05-f115-39571d94dfcd",f="55a88716-958a-4b91-b666-6c1118abdee4";return a.setExcludeGroup(d?"ecommerce_old":"ecommerce_new"),a.getApplication=_.compose(a.getApplication,function(a){return d&&a===f?e:a}),a}])}]),angular.module("marketEditorAppInternal").service("appFlow",["$q","$state","$stateParams","$window","wixModal","biManager","domBiLogger","appMarketApi","applicationTypeDetector","experimentChecker",function(a,b,c,d,e,f,g,h,i,j){function k(a,c){var d={appId:a.appDefinitionId};c.origin&&(d.biOrigin=c.origin),c.category&&(d.biCategory=c.category),c.value&&(d.biValue=c.value),e.openModal(b.href("permission-request",d),null,450,178,a.appDefinitionId)}function l(b,c,e){var f=a.defer();return g.log(c||"APP_ADDED",_.defaults({app_id:b.appDefinitionId,app_name:b.name},e),f.resolve),("ed_search"===e.origin||"ed_search_modal"===e.origin)&&h.getUserDetails().then(function(a){var c="specs.FuzzySearchSpec",f=j.getExperiments(),g={app_name:b.name,search_term:e.value,experiment:c,experimentValue:f[c],experimentRevision:2,userName:a};d.mixpanel.track("Add to site",g)}),f.promise}this.add=function(d,e,g){var j;if(g=g||f.buildParams(b,c),j=l(d,e,g),i.madeByWix(d))return h.addApplication(d,j);var m=a.defer();return h.getIfAppIsInstalled(d.appDefinitionId,function(a){a?h.addApplication(d,j).then(m.resolve):(k(d,g),m.reject())}),m.promise}}]),angular.module("marketEditorAppInternal").service("applicationManager",["$rootScope","$q","applicationRepository","reviewsRepository",function(a,b,c,d){function e(a){return b.all({apps:a,reviews:g.getAllReviews()}).then(function(a){function b(a){return a.reviews=c[a.appDefinitionId],a}var c=_.indexBy(a.reviews,"id");return _.isArray(a.apps)?_.map(a.apps,b):b(a.apps)})}var f,g=this,h={};this.getAllReviews=function(){return f||(f=d.getProducts()),f},this.getReviews=function(a){return d.getProduct(a)},this.getAllApplicationsByQuery=function(a,d,f,g){var h=[e(c.getAllApplicationsByQuery(a,d,f,g))];return d&&h.push(c.getAllApplicationsCountByQuery(a,g)),b.all(h).then(function(a){var b,c=a[0];return d?(b=a[1].total,{applications:c,totalResults:b,offset:f,limit:d}):c})},this.getAllCategories=function(){return c.getAllCategories.apply(c,arguments)},this.addDeveloperApplication=function(a){h[a]=!0},this.hasDeveloperApplications=function(){return _.size(h)>0},this.getDeveloperApplications=function(){return c.getAllApplicationsByIdMap(h)},this.getBest2014Apps=function(a){return e(c.getAllApplicationsByIdMap(a))},angular.forEach(c,function(a,b){g[b]=g[b]||function(){return e(a.apply(c,arguments))}})}]),angular.module("marketEditorAppInternal").service("appMarketApi",["$window","$location","$translate","$q","$timeout","experimentChecker",function(a,b,c,d,e,f){function g(a,c){return b.search().appDefinitionId===a.appDefinitionId||c&&c.published}function h(a,b){return{appDefinitionId:a.appDefinitionId,appName:a.name,price:a.price,upgradeBenefits:a.upgradeBenefits,supportInfo:a.supportInfo,type:a.type||b,doNotShowPageAddedPanel:a.hideAppFirstTimeMsg,panelInfo:{title:c("application.panelInfo.title"),features:a.features}}}function i(a,b){return function(){var c,f=d.defer();return a(function(a){f.resolve(a),c=!0}),e(function(){c||(f.reject(),console.log(b+"() did not resolve in "+l+"ms"))},l),f.promise}}function j(a,b){var c=a.widgets||[];return b?_.find(c,function(b){return b["default"]&&g(a,b)})||(g(a,c[0])?c[0]:void 0):_.find(c,function(a){return a&&a.published})||c[0]}var k=a.AppMarket,l=5e3;this.addApplication=function(a,b){var c=f.isExperimentEnabled("multiWidget"),e=d.defer();if(b?b.then(e.resolve):e.resolve(),a.isWixComponent)k.addComponentToSite(a.wixComponentId);else if("list"===a.appType)k.addAppToSite(h(a),"wixappsPart",a.listWidgetId);else if(!c&&a.hasSection||c&&(a.section||{}).sectionUrl&&g(a,a.section))k.addAppToSite(h(a,"tpa"),"tpaSection");else{var i=h(a,"tpa"),l=j(a,c);i.widgets={},i.widgets[l.widgetId]=l,k.addAppToSite(i,"tpaWidget",l.widgetId)}return e.promise},this.getIfAppIsInstalled=_.bind(k.getIfAppIsInstalled,k),this.openModal=_.bind(k.openModal,k),this.closeModal=_.bind(k.closeModal,k),this.openAppPopup=_.bind(k.openAppPopup,k),this.closeAppPopup=_.bind(k.closeAppPopup,k),this.removePendingApp=_.bind(k.removePendingApp,k),this.getPendingAppsList=i(_.bind(k.getPendingAppsList,k),"getPendingAppsList"),this.getUserDetails=i(_.bind(k.getUserDetails,k),"getUserDetails")}]),angular.module("marketEditorAppInternal").service("searchManager",["$state",function(a){var b;this.setQuery=function(a){b=a},this.getQuery=function(){return b},this.search=function(b){a.go("page.search",{query:b})}}]),angular.module("marketEditorAppInternal").service("suggestAnApp",["$rootScope","$modal","$http","domBiLogger","suggestAnAppEndpoint","metaSiteId","appMarketApi",function(a,b,c,d,e,f,g){function h(){return i.$scope.suggestionForm.$valid}var i,j,k=a.$new();k.loading=!1,this.modalInstance=i=b({scope:k,template:"views/includes/suggest-an-app/form.html",show:!1,backdrop:!0,backdropAnimation:"wishlist-backdrop"}),g.getUserDetails().then(function(a){j=a}),i.$scope.showSuggestionForm=this.showSuggestionForm=function(a,b){return a&&i.hide(),i.$scope.origin=b,d.log("WL_OPENED",{origin:i.$scope.origin}),i.$scope.showThankYou=!1,i.$promise.then(i.show)},k.submitSuggestion=this.submitSuggestion=function(){return i.$scope.errors=!1,h()&&j?(i.$scope.loading=!0,c({url:e,method:"POST",data:{appName:i.$scope.appName,description:i.$scope.appDescription,metaSiteId:f,from:j,fromEmail:j+"@wishlist.wix.com"}}).then(function(){d.log("WL_SEND_CLICKED",{name:i.$scope.appName,dsc:i.$scope.appDescription,origin:i.$scope.origin}),i.$scope.appName="",i.$scope.appDescription="",i.$scope.showThankYou=!0},function(){i.$scope.errors=!0})["finally"](function(){i.$scope.loading=!1})):!1}}]),angular.module("marketEditorAppInternal").service("wixModal",["$location","appMarketApi",function(a,b){function c(b,c){c=_.pick(c,function(a){return a});var d=_.size(c)>0?b+"?"+URI.buildQuery(c):b,e=URI.parse(d),f=new URI(d);return e.protocol||(f=new URI(a.absUrl()).fragment(d)),f.toString()}this.openModal=function(a,d,e,f,g){return b.openModal(c(a,{origin:d}),e||900,f||625,g)},this.openAppPopup=function(a,d,e,f,g,h){return b.openAppPopup(c(a,d),e||900,f||625,g,h)}}]),angular.module("marketEditorAppInternal").service("pendingAppsManager",["appMarketApi","applicationRepository",function(a,b){function c(a){_.remove(d.pendingApps,{appDefinitionId:a.appDefinitionId})}var d=this;this.pendingApps=[],this.loadPendingApplications=function(){var c;return a.getPendingAppsList().then(function(a){function d(a){return a.appDefId||a.appDefinitionId}return c=_.indexBy(a,d),b.getAllApplicationsByIdMap(_.transform(a,function(a,b){a[d(b)]=!0},{}))})["catch"](function(){return[]}).then(function(a){function b(a){return a.myAppData={clientSpec:c[a.appDefinitionId]},a}return d.pendingApps=_.map(a,b)})},this.addPendingApplication=function(b){return a.addApplication(b).then(function(a){return c(b),a})},this.removePendingApplication=function(b){a.removePendingApp(b.appDefinitionId),c(b)}}]),angular.module("marketEditorAppInternal").service("biManager",["$injector","domBiLogger",function(a,b){var c,d={},e="ed_market",f=!1,g={};this.getBiOrigin=function(){var b=this;return a.invoke(["$state","$stateParams",function(a,c){return c.biOrigin||a.$current.biOrigin||c.categorySlug&&b.getCategoryBySlug(c.categorySlug)}])},this.setCategories=function(a){d=_.chain(a).indexBy("slug").mapValues("key").value()},this.getCategoryBySlug=function(a){return d[a]},this.setLastOrigin=function(a){c=a},this.getLastOrigin=function(){return c},this.setSkipNextStateChangeSuccessEvent=function(a){f=a},this.buildParamsForApplication=function(a,b,c){var d=angular.extend({},a.params,b),f={app_id:c.appDefinitionId,app_name:c.name,origin:d.origin||e};return d.category&&(f.category=d.category),d.value&&(f.value=d.value),f},this.buildParamsForApplicationModal=function(a,b,c){var d=angular.extend({},a.params,b),f={app_id:c.appDefinitionId,app_name:c.name,origin:(d.origin||e)+"_modal"};return d.category&&(f.category=d.category),d.value&&(f.value=d.value),f},this.buildParams=function(a,b){var c={origin:a.current.biOrigin||e};return a.current.biParams&&(c=_.defaults(a.current.biParams,c)),b.categorySlug&&(c.category=this.getCategoryBySlug(b.categorySlug)),b.query&&(c.value=b.query),c},this.buildParamsForStateChange=function(a,b,c,d){var f=a.biParams||{};return f=angular.extend({},{origin:e},f),c.biOrigin&&(f.origin=c.biOrigin),"SEARCHED"===a.biEventName&&(f.value=b.query),"CATEGORY_SELECTED"!==a.biEventName||f.category||(f.category=this.getCategoryBySlug(b.categorySlug)),f},this.getPreparedParams=function(a){return g[a]},this.onStateChangeSuccess=function(a,c,d,e,h){if(!(e.name.indexOf("application.")>-1)){if(f)return void(f=!1);if(c.biEventName){var i=this.buildParamsForStateChange(c,d,e,h);c.biPrepareParams?g[c.biEventName]=i:b.log(c.biEventName,i)}}}}]),angular.module("marketEditorAppInternal").service("addToSite",["appMarketApi","appFlow","pendingAppsManager",function(a,b,c){var d=d||c.loadPendingApplications();this.add=function(e,f){var g=_.find(d,{appDefinitionId:e.appDefinitionId})?c.addPendingApplication:function(a){return b.add(a,void 0,f)};g(e).then(a.closeAppPopup)}}]),angular.module("marketEditorAppRouting").constant({applicationTabsConfig:[{url:"overview",id:"overview"},{url:"demo",id:"demo",hide:function(a){return!a.liveDemoUrl}},{url:"features",id:"features",hide:function(a){return!a.features.length},controller:"FeaturesCtrl",resolve:{applicationPrice:["$stateParams","applicationManager",function(a,b){return b.getApplicationPrice(a.slug)}]}},{url:"reviews",id:"reviews"},{url:"developer",id:"developer-info",hide:function(a){return!a.developerInfo}}]}).config(["$stateProvider","$urlRouterProvider","applicationTabsConfig",function(a,b,c){b.when("",["$injector","$location",function(a,b){var c=b.absUrl(),d=c.match(/query=[^\&]+/),e=c.match(/openAppDefId=[^\&]+/),f=c.match(/categorySlug=[^\&]+/),g=c.match(/appDefinitionId=[^\&]+/),h=a.get("$state"),i=a.get("biManager");if(d)h.go("page.search",{query:decodeURIComponent(decodeURIComponent(d[0].replace("query=","")))});else if(e)h.go("page.single",{appId:decodeURIComponent(e[0].replace("openAppDefId=",""))});else if(f){var j=decodeURIComponent(f[0].replace("categorySlug=","")),k={pending:"page.pending",featured:"page.featured","new":"page.new",popular:"page.popular",all:"page.all"};k[j]?h.go(k[j]):h.go("page.category",{categorySlug:j})}else{if(!g)return i.setSkipNextStateChangeSuccessEvent(!0),"/";g=decodeURIComponent(g[0].replace("appDefinitionId=","")),a.get("applicationManager").addDeveloperApplication(g),h.go("page.developer-apps",{appId:g})}}]).when("/","/featured").otherwise(function(a,b){a.get("$state").go("page.404",{},{location:!1})}),a.state("error",{"abstract":!0,views:{layout:{templateUrl:"views/layout-error.html"}}}).state("error.404",{views:{content:{templateUrl:"views/pages/404.html"}}}),a.state("fullpage",{"abstract":!0,views:{layout:{templateUrl:"views/layout-fullpage.html"}}}).state("fullpage.best2014",{url:"/best2014",views:{content:{controller:"Best2014Ctrl",templateUrl:"views/pages/best2014.html",resolve:{applications:["applicationManager","bestAppsCategoryMap2014",function(a,b){var c={};return _.forEach(b,function(a){_.forEach(a,function(a){a.applicationsInCategory.forEach(function(a){c[a]=!0})})}),a.getBest2014Apps(c)}]}}},params:{category:""}}),a.state("page",{"abstract":!0,views:{layout:{templateUrl:"views/layout.html"},"sidebar@page":{resolve:{categories:["applicationManager",function(a){return a.getAllCategories()}],pendingApps:["pendingAppsManager",function(a){return a.loadPendingApplications()}]},controller:"SidebarCtrl",templateUrl:"views/includes/sidebar.html"}}}).state("page.404",{views:{"content@page":{templateUrl:"views/pages/404.html"}}}).state("page.pending",{url:"/pending",views:{"content@page":{controller:"PendingCtrl",templateUrl:"views/pages/pending.html"}},biOrigin:"ed_pending",biEventName:"CATEGORY_SELECTED",biParams:{category:"Pending Apps"}}).state("page.featured",{url:"/featured",views:{"content@page":{resolve:{applications:["applicationManager","applicationsPerPageLimit",function(a,b){return a.getFeaturedApplications(b)}],applicationsLoader:["applicationManager",function(a){return a.getFeaturedApplications}],promotedApplications:["applicationManager",function(a){return a.getPromotedApplications()}],popularApplications:function(){return[]}},controller:"MainCtrl",templateUrl:"views/pages/main.html"}},biEventName:"CATEGORY_SELECTED",biParams:{category:"Featured"}}).state("page.new",{url:"/new",views:{"content@page":{resolve:{applications:["applicationManager","applicationsLimitForNewPage",function(a,b){return a.getNewApplications(b)}],applicationsLoader:["applicationManager",function(a){return a.getNewApplications}],promotedApplications:function(){return[]},popularApplications:function(){return[]}},controller:"MainCtrl",templateUrl:"views/pages/main.html"}},biEventName:"CATEGORY_SELECTED",biParams:{category:"Newest"}}).state("page.popular",{url:"/popular",views:{"content@page":{resolve:{applications:["applicationManager","applicationsLimitForMostPopularPage",function(a,b){return a.getMostPopularApplications(b)}],applicationsLoader:["applicationManager",function(a){return a.getMostPopularApplications}],promotedApplications:function(){return[]},popularApplications:["applicationManager","experimentChecker","applicationsLimitForBestByWix",function(a,b,c){return b.isEnabled("specs.BestByWixEditor")?a.getBestByWixApplications(c):[]}]},controller:"MainCtrl",templateUrl:"views/pages/main.html"}},biEventName:"CATEGORY_SELECTED",biParams:{category:"Most Popular"}}).state("page.all",{url:"/all",views:{"content@page":{resolve:{applications:["applicationManager","applicationsPerPageLimit",function(a,b){return a.getAllApplications(b)}],applicationsLoader:["applicationManager",function(a){return a.getAllApplications}],promotedApplications:["applicationManager",function(a){return a.getPromotedApplications()}],popularApplications:function(){return[]}},controller:"MainCtrl",templateUrl:"views/pages/main.html"}},biEventName:"CATEGORY_SELECTED",biParams:{category:"All Apps"}}).state("page.developer-apps",{url:"/developer-apps?appId",views:{"content@page":{resolve:{applications:["applicationManager",function(a){return a.getDeveloperApplications()}],applicationsLoader:function(){return angular.noop()},promotedApplications:function(){return[]},popularApplications:function(){return[]}},controller:"MainCtrl",templateUrl:"views/pages/main.html"}},biOrigin:"ed_developer_apps",biParams:{category:"Developer Apps"}}).state("page.search",{url:"/search?query",views:{"content@page":{controller:"SearchCtrl",templateUrl:"views/pages/search.html",resolve:{applications:["$stateParams","applicationManager","applicationsPerPageSearchLimit",function(a,b,c){return b.getAllApplicationsByQuery(a.query,c)}],allApplications:["$stateParams","applicationManager","applicationsPerPageSearchLimit",function(a,b,c){return b.getAllApplications(c)}],applicationsLoader:["applicationManager",function(a){return a.getAllApplicationsByQuery}],allApplicationsLoader:["applicationManager",function(a){return a.getAllApplications}]}}},biEventName:"SEARCHED",biOrigin:"ed_search",biPrepareParams:!0}).state("page.single",{url:"/single?appId",views:{"content@page":{controller:"SingleCtrl",templateUrl:"views/pages/single.html",resolve:{application:["$stateParams","applicationManager",function(a,b){return b.getApplication(a.appId)}]}}},biOrigin:"ed_site_selector"}).state("permission-request",{url:"/permission-request?appId&biEvent&biOrigin&biCategory&biValue",views:{layout:{templateUrl:"views/layout-modal.html"},"content@permission-request":{resolve:{application:["$stateParams","applicationManager",function(a,b){return b.getApplication(a.appId)}]},controller:"PermissionRequestCtrl",templateUrl:"views/pages/permission-modal.html"}}}).state("page.category",{url:"/{categorySlug:[a-z0-9_-]+}",views:{"content@page":{resolve:{applications:["$stateParams","applicationManager","applicationsPerPageLimit",function(a,b,c){
return b.getAllApplicationsByCategory(a.categorySlug,c)}],applicationsLoader:["$stateParams","applicationManager",function(a,b){return _.partial(b.getAllApplicationsByCategory,a.categorySlug)}],promotedApplications:function(){return[]},popularApplications:function(){return[]}},controller:"MainCtrl",templateUrl:"views/pages/main.html"}},biEventName:"CATEGORY_SELECTED"}),a.state("404",{views:{layout:{templateUrl:"views/layout-modal.html"},"content@404":{templateUrl:"views/pages/404.html"}}}).state("application",{url:"/:slug","abstract":!0,views:{layout:{templateUrl:"views/layout-modal.html"},"content@application":{resolve:{application:["$stateParams","applicationManager",function(a,b){return b.getApplication(a.slug)}],userDetails:["appMarketApi",function(a){return a.getUserDetails()}]},controller:"ApplicationCtrl",templateUrl:"views/pages/application.html"}}}),c.forEach(function(b){a.state("application."+b.id,{url:"/"+b.url+"?origin&category&value",views:{"tabContent@application":{templateUrl:"views/pages/application/"+b.url+".html",controller:b.controller,resolve:b.resolve}}})})}]).run(["$rootScope","$injector",function(a,b){a.$on("$stateChangeError",function(c,d,e,f,g,h){a.appMarketLoaded=!0,0===d.name.indexOf("application.")?b.get("$state").go("404",{},{location:!1}):"page.404"===d.name?b.get("$state").go("error.404",{},{location:!1}):b.get("$state").go("page.404",{},{location:!1})})}]),angular.module("marketEditorTemplates").run(["$templateCache",function(a){a.put("views/directives/application-grid.html",'<div class="application-grid new-app-boxes-design clearfix" new-app-boxes-design-hover>\n    <div class="application" ng-repeat="application in applications"\n       ng-class="{\'new-app-hover-button\': experiment.isEnabled(\'specs.NewAppHoverButton\'), \'old-app-hover-button\': !experiment.isEnabled(\'specs.NewAppHoverButton\')}">\n        <div class="application-content">\n            <div class="application-details">\n                <a class="app-link" ui-sref="application.overview({slug: application.slug})" open-in-modal modal-params="{{ biParams }}">\n                    <div class="application-advert">\n                        <img ng-src="{{application.frontPageImage | cdnResize:200:85}}" width="200" height="85"\n                             alt="{{ \'application.advertImageAltText\' | translate : { application: application.name, company: application.by } }}"/>\n                    </div>\n                    <div class="application-mobile-icon" ng-if="application.hasMobile"></div>\n                    <h3 class="application-title" ng-class="{\'has-mobile\': application.hasMobile}">{{application.name}}</h3>\n\n                    <div class="application-pricing">\n                      <application-pricing application="application"></application-pricing>\n                    </div>\n                    <div class="application-ratings clearfix">\n                        <app-stats app="application"></app-stats>\n                    </div>\n                    <div class="application-description">\n                        <p ng-bind-html="application.teaser"></p>\n                    </div>\n                </a>\n                <a class="button button-orange" add-to-site app="application" ng-click="addApplication(application, {origin: \'ed_market\'})">\n'+"                    {{ (experiment.isEnabled('specs.AddAppToTryItNowEditor') ? 'application.action.tryItNow' : 'editor.application.action.addToSite') | translate }}\n                </a>\n            </div>\n        </div>\n    </div>\n</div>\n\n"),a.put("views/directives/welcome-screen.html",'<div class="welcome-screen">\n  <div class="dialog">\n    <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="close()" wix-bi="WS_CLOSED"><span>&times;</span></button>\n\n    <div class="title">{{ \'welcomeScreen.title\' | translate }}</div>\n    <div class="description" ng-bind-html="\'welcomeScreen.description\' | translate | trustAsHtml"></div>\n\n    <div class="primary-actions">\n      <a ui-sref="page.category({ categorySlug: \'forms\' })" ng-click="skipNextStateChangeSuccessEvent()" class="action contact" wix-bi="WS_ACTION_CLICKED" wix-bi-args="{ category: \'Forms\' }"><span>{{ \'welcomeScreen.action.contact\' | translate }}</span></a>\n      <a ui-sref="page.category({ categorySlug: \'social\' })" ng-click="skipNextStateChangeSuccessEvent()" class="action get-social" wix-bi="WS_ACTION_CLICKED" wix-bi-args="{ category: \'Social\' }"><span>{{ \'welcomeScreen.action.getSocial\' | translate }}</span></a>\n      <a ui-sref="page.category({ categorySlug: \'ecommerce\' })" ng-click="skipNextStateChangeSuccessEvent()" class="action sell-online" wix-bi="WS_ACTION_CLICKED" wix-bi-args="{ category: \'eCommerce\' }"><span>{{ \'welcomeScreen.action.sellOnline\' | translate }}</span></a>\n    </div>\n\n    <div class="separator"><span>{{ \'welcomeScreen.or\' | translate }}</span></div>\n\n    <div class="secondary-actions">\n      <a href="" ng-click="close()" class="action browse-featured-apps" wix-bi="WS_ACTION_CLICKED" wix-bi-args="{ category: \'Featured\' }">{{ \'welcomeScreen.action.browseFeaturedApps\' | translate }}</a>\n    </div>\n  </div>\n</div>'),a.put("views/includes/application-list-new-search-results-design.html",'<div class="application-list-3-0">\n  <div class="application" ng-repeat="application in applications" ng-class="{ last: $last }">\n    <div class="application-content">\n      <div class="content-right">\n        <div class="application-action">\n          <a class="button-orange" href="" ng-click="addApp(application)">{{ (experiment.isEnabled(\'specs.AddAppToTryItNowEditor\') ? \'application.action.tryItNow\' : \'editor.application.action.addToSite\') | translate }}</a>\n        </div>\n\n        <div class="application-pricing">\n          <application-pricing application="application"></application-pricing>\n        </div>\n      </div>\n      <div class="content-left">\n        <h2 class="application-title"><span ng-bind-html="application.name | highlight:query"></span><span class="application-mobile-icon" ng-if="application.hasMobile"></span></h2>\n\n        <div class="application-ratings">\n          <reviews-rating value="application.reviews.averageRating"\n                          total="application.reviews.totalReviews"\n                          disabled="true" show-text="true">\n          </reviews-rating>\n        </div>\n\n        <div class="details">\n          <div class="application-advert">\n            <a ui-sref="application.overview({slug: application.slug})" open-in-modal modal-params="{{ biParams }}"><img\n              ng-src="{{application.frontPageImage}}" width="200" height="85"\n              alt="{{ \'application.advertImageAltText\' | translate : { application: application.name, company: application.by } }}"/></a>\n          </div>\n          <div class="application-advert-ribbon" ng-if="application.myAppData.clientSpec.appDefId || application.myAppData.clientSpec.vendorProductId"><span>{{ \'application.price.premium\' | translate }}</span></div>\n          <p class="application-description" ng-bind-html="application.teaser | highlight:query"></p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),a.put("views/includes/carousel.html",'<div style="margin-right: 12px">\n    <wix-cycle-carousel ng-if="promotedApplications.length && !experiment.isEnabled(\'specs.FrontPageCarouselEditor\') && !experiment.isEnabled(\'specs.BestApps2014Editor\')">\n        <div class="carousel-items" ng-repeat="partition in promotedApplications">\n            <a class="carousel-item" ng-repeat="application in partition"\n               ui-sref="application.overview({ slug: application.slug })" open-in-modal modal-params="{ origin: \'ed_carousel\' }" ><img\n                    ng-src="{{ application.featuredImage + \'_crp_0_0_0_0_310_180_crp\' }}"></a>\n        </div>\n    </wix-cycle-carousel>\n    <div ng-if="promotedApplications.length && (experiment.isEnabled(\'specs.FrontPageCarouselEditor\') || experiment.isEnabled(\'specs.BestApps2014Editor\'))" class="carousel-3-0">\n        <slick init-onload=true data="promotedApplications" slides-to-show="1" infinite="true" autoplay="true" autoplay-speed="5000" dots="true" arrows="false" ng-show="!carouselLoading">\n            <div ng-if="experiment.isEnabled(\'specs.BestApps2014Editor\')">\n                <a ui-sref="fullpage.best2014({ category: \'carousel\' })">\n                    <img ng-src="{{ appMarketStaticsUrl }}/images/bestapps-banner-2014.png">\n                </a>\n            </div>\n            <div ng-repeat="app in promotedApplications">\n                <a ui-sref="application.overview({ slug: app.slug })" open-in-modal modal-params="{ origin: \'ed_carousel\' }" >\n                    <img ng-src="{{ app.imageEditorCarousel3 }}">\n                </a>\n                <button class="button" ng-click="addApp(app, {origin: \'ed_carousel\'})"></button>\n            </div>\n        </slick>\n    </div>\n</div>'),a.put("views/includes/sidebar-new-categories-design.html",'<div class="navigation new-categories-design pull-left" scroll-fixed limit-to="#wix-footer" limit-offset="287"\n     ng-class="{\'with-pending\': pendingAppsManager.pendingApps.length, \'with-developer\': hasDeveloperApplications(), \'with-best2014\': experiment.isEnabled(\'specs.BestApps2014Editor\')}">\n    <form id="search_app" role="form" ng-submit="search(query)" class="search">\n        <input type="text" placeholder="{{ \'search.placeholder\' | translate }}"\n               ng-model="query" focus="!query" autofocus/>\n        <input type="submit" value=""/>\n    </form>\n\n    <nav class="primary">\n        <ul class="menu-top category pending" ng-if="pendingAppsManager.pendingApps.length">\n            <li ui-sref-active="selected" selected-menu-item>\n                <a clean-href ui-sref="page.pending">{{ \'category.pending.name\' | translate }} <span ng-if="experiment.isEnabled(\'specs.PendingAppsEditor\')" class="pending-apps-count" ng-bind="pendingAppsManager.pendingApps.length"></span></a>\n            </li>\n\n            <div ng-if="!experiment.isEnabled(\'specs.PendingAppsEditor\')" class="count">\n                <span class="outer-circle"></span>\n                <span class="inner-circle" ng-bind="pendingAppsManager.pendingApps.length"></span>\n            </div>\n        </ul>\n\n        <div class="hr" ng-if="pendingAppsManager.pendingApps.length">\n            <hr/>\n        </div>\n\n        <ul class="menu-top category developer" ng-if="hasDeveloperApplications()">\n            <li ui-sref-active="selected" selected-menu-item>\n                <a clean-href ui-sref="page.developer-apps">{{ \'category.developerApps.name\' | translate }}</a>\n            </li>\n        </ul>\n\n        <div class="hr" ng-if="hasDeveloperApplications()">\n            <hr/>\n        </div>\n\n        <ul class="menu-top">\n            <li ui-sref-active="selected" selected-menu-item>\n                <a clean-href ui-sref="page.featured">{{ \'category.main.name\' | translate }}</a>\n            </li>\n            <li ui-sref-active="selected" selected-menu-item>\n                <a ui-sref="page.new">{{ \'category.new.name\' | translate }}</a>\n            </li>\n            <li ui-sref-active="selected" selected-menu-item>\n                <a ui-sref="page.popular">{{ \'category.popular.name\' | translate }}</a>\n            </li>\n            <li ui-sref-active="selected" selected-menu-item ng-if="experiment.isEnabled(\'specs.BestApps2014Editor\')">\n                <a ui-sref="fullpage.best2014" class="purple">{{ \'category.best2014.name\' | translate }}</a>\n            </li>\n        </ul>\n\n        <div class="hr">\n            <hr/>\n        </div>\n\n        <ul class="secondary" wix-scroll-pane>\n            <li ui-sref-active="selected" selected-menu-item>\n                <a ui-sref="page.all">{{ \'category.all.name\' | translate }}</a>\n            </li>\n            <li ng-repeat="category in categories" ui-sref-active="selected" selected-menu-item>\n                <a ui-sref="page.category({categorySlug:category.slug})">{{ category.name }}</a>\n            </li>\n        </ul>\n    </nav>\n</div>'),a.put("views/includes/sidebar.html","<ng-include src=\"'views/includes/sidebar-new-categories-design.html'\"></ng-include>"),a.put("views/includes/suggest-an-app/form.html",'<div class="suggest-an-app">\n    <div class="dialog" ng-class="{\'thankyou-container\': showThankYou}">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="$hide()"><span>&times;</span></button>\n\n        <div class="suggestion-form" ng-show="!showThankYou">\n            <div class="wishlist-icon"></div>\n            <div class="title">{{ \'wishlist.title\' | translate }}</div>\n            <div class="description">{{ \'wishlist.description\' | translate }}</div>\n            <div ng-show="errors" class="errors">\n                <strong translate="wishlist.errors"></strong>\n            </div>\n            <div class="form-container">\n                <form name="suggestionForm">\n                    <div class="form-group appName">\n                        <input type="text" class="form-control app-name" ng-model="appName" placeholder="{{ \'wishlist.placeholder.name\' | translate }}" required>\n                    </div>\n                    <div class="form-group appDescription">\n                        <textarea class="form-control app-description" ng-model="appDescription" placeholder="{{ \'wishlist.placeholder.description\' | translate }}" required></textarea>\n                    </div>\n\n                    <button type="button" class="button-cancel button-white" ng-click="$hide()">{{ \'wishlist.button.cancel\' | translate }}</button>\n                    <button type="submit" class="button-send button-blue" ng-class="{\'loading\': loading}" ng-click="submitSuggestion()" ng-disabled="!suggestionForm.$valid">\n                        <span>{{ loading ? \'application.action.openLoading\' : \'wishlist.button.send\' | translate }}</span>\n                    </button>\n                </form>\n            </div>\n        </div>\n        <div class="thankyou" ng-show="showThankYou">\n            <div class="wishlist-icon"></div>\n            <div class="title">{{ \'wishlist.thankyou.title\' | translate }}</div>\n            <div class="description">{{ \'wishlist.thankyou.description\' | translate }}</div>\n            <div class="another-suggestion">\n                <div class="suggestion-link">\n                    <span ng-click="showSuggestionForm(true, origin)">{{ \'wishlist.thankyou.addAnotherSuggestion\' | translate }}</span>\n                </div>\n                <button type="button" class="button-done button-blue" ng-click="$hide()">{{ \'wishlist.button.done\' | translate }}</button>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("views/layout-error.html",'<div class="layout-error" ui-view="content"></div>'),a.put("views/layout-fullpage.html",'<div class="layout">\n    <div loading-indicator class="loading-indicator"></div>\n    <div class="content animate" ui-view="content"></div>\n</div>'),a.put("views/layout-modal.html",'<div class="layout-modal" ui-view="content"></div>'),a.put("views/layout.html",'<div class="layout">\n    <div class="sidebar new-categories-design" ui-view="sidebar"></div>\n    <div class="content-wrapper">\n        <div loading-indicator class="loading-indicator"></div>\n        <div class="content animate" ui-view="content"></div>\n    </div>\n</div>'),a.put("views/pages/404.html","404"),a.put("views/pages/application.html",'<div class="page-application-modal new-modal-design">\n  <div class="application-header">\n    <div class="action-container">\n      <div class="application-action">\n        <a class="button-orange button-orange-large" ng-click="addApp(app)" href="">\n          {{ (experiment.isEnabled(\'specs.AddAppToTryItNowEditor\') ? \'application.action.tryItNow\' : \'editor.application.action.addToSite\') | translate }}\n        </a>\n      </div>\n      <div class="application-pricing">\n        <application-pricing application="app"></application-pricing>\n      </div>\n    </div>\n\n    <h1 class="application-title">{{ app.name }} <span class="application-producer">{{ \'application.by\' | translate}} <a ng-href="{{ app.companyWebsite }}" target="_blank">{{ app.by }}</a></span></h1>\n    <div class="application-ratings">\n      <reviews-rating link="{{reviewsTabUrl}}" value="app.reviews.averageRating" total="app.reviews.totalReviews" disabled="true" show-text="true"></reviews-rating>\n    </div>\n    <div class="application-logo"><img ng-src="{{ app.appIcon }}" width="60" height="60"/></div>\n  </div>\n\n  <div class="application-tabs">\n    <ul class="nav nav-tabs">\n      <li ng-repeat="tab in tabs" id="tab-application-{{tab.id}}" ng-class="{\'last\': $last}" ng-hide="!app || tab.hide(app)" ui-sref-active="active">\n        <a ui-sref="application.{{tab.id}}" wix-bi="APP_TAB_SELECTED"\n           wix-bi-args="{{ buildBiParams({ tab_name: tab.id }) }}"\n           ng-bind="getTabNameKey(tab.id) | translate">\n        </a>\n      </li>\n    </ul>\n  </div>\n\n  <div class="tab-content">\n    <div class="active tab-pane" ui-view="tabContent@application"></div>\n  </div>\n</div>\n'),a.put("views/pages/application/demo.html",'<div id="application-demo">\n  <iframe ng-src="{{trustedDemoUrl}}" width="820" height="450" frameborder="0"></iframe>\n</div>'),a.put("views/pages/application/developer.html",'<div id="application-developer-info">\n  <div class="text-container" wix-scroll-pane auto-reinitialise="false">\n    <div class="text-content">\n      <h3>{{ \'application.tabs.developer-info.thisAppWasMadeBy\' | translate }}\n        <a ng-href="{{app.companyWebsite}}" target="_blank">{{app.by}}</a>\n      </h3>\n\n      <div class="developer-info-text" ng-bind-html="app.developerInfo"></div>\n\n      <div class="support-info"\n           ng-show="app.supportInfo.supportUrl || app.supportInfo.supportMail || app.supportInfo.supportPhone">\n        <h3>{{\'application.tabs.developer-info.supportInfo.header\' | translate}}</h3>\n        <p>{{\'application.tabs.developer-info.supportInfo.subHeader\' | translate}}</p>\n\n        <p>\n                <span ng-show="app.supportInfo.supportMail">\n                    <span class="support-email">{{\'application.tabs.developer-info.supportInfo.email\' | translate}}:</span>\n                    <a ng-href="mailto:{{app.supportInfo.supportMail}}">{{app.supportInfo.supportMail}}</a>\n                </span>\n          <br/>\n                <span ng-show="app.supportInfo.supportUrl">\n                    <span class="support-url">{{\'application.tabs.developer-info.supportInfo.website\' | translate}}:</span>\n                    <a ng-href="{{app.supportInfo.supportUrl}}" target="_blank">{{app.supportInfo.supportUrl}}</a>\n                </span>\n          <br/>\n                <span ng-show="app.supportInfo.supportPhone">\n                    <span class="support-phone">{{\'application.tabs.developer-info.supportInfo.phone\' | translate}}:</span>\n                    <a>{{app.supportInfo.supportPhone}}</a>\n                </span>\n        </p>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("views/pages/application/features.html",'<wix-app-features app="app" price-override="{{ app.price }}"></wix-app-features>'),a.put("views/pages/application/overview.html",'<div id="application-overview" ng-controller="OverviewCtrl" class="new-modal-design">\n  <div class="text-container" wix-scroll-pane auto-reinitialise="false">\n    <div class="text-content">\n      <h3>{{app.name}}</h3>\n\n      <div class="application-description" ng-bind-html="app.description"></div>\n    </div>\n  </div>\n\n  <div class="carousel">\n    <wix-thumbnail-carousel thumbnails-per-slide="{{ thumbnailsPerSlide }}" thumbnails="{{thumbnails}}" items="{{pictures}}"\n                            alt="{{ \'application.carousel.thumbnail.altText\' | translate : { application: app.name } }}">\n    </wix-thumbnail-carousel>\n  </div>\n</div>'),a.put("views/pages/application/reviews.html",'<div id="application-reviews">\n  <reviews-public product-id="{{app.appDefinitionId}}"\n                  share-properties="shareProperties"\n                  when-update-review="refreshReviews()">\n  </reviews-public>\n</div>'),a.put("views/pages/best2014.html",'<div class="best-apps">\n    <div class="top-navigation">\n        <div class="back-to-am">\n            <a ui-sref="page.featured" wix-bi="2014_BACK_TO_MARKET" wix-bi-args="{ market_type: \'editor-market\', origin: \'back-to-market\' }">{{ \'bestApps.backToAppMarket\' | translate }}</a>\n        </div>\n        <ul class="menu">\n            <li><a ng-click="scrollInto(\'bestSellers\')">{{ \'bestApps.bestSellers\' | translate }}</a></li>\n            <li><a ng-click="scrollInto(\'topFree\')">{{ \'bestApps.topFree\' | translate }}</a></li>\n            <li><a ng-click="scrollInto(\'trending\')">{{ \'bestApps.trending\' | translate }}</a></li>\n            <li><a ng-click="scrollInto(\'staffPicks\')">{{ \'bestApps.staffPicks\' | translate }}</a></li>\n        </ul>\n\n    </div>\n    <div class="main-content">\n        <div class="scroll-pane" wix-scroll-pane>\n            <div class="bg">\n                <div class="header">\n                    <span class="best">best</span>\n                    <span class="of">of</span>\n                    <span class="year">2014</span>\n                    <span class="tagline">{{ \'bestApps.header.tagline\' | translate }}</span>\n                </div>\n                <div ng-repeat="item in bestApplications" class="category">\n\n                    <div ng-repeat="(key, category) in item">\n                        <span class="category-name" id="{{ key }}">{{ category.name | translate }}</span>\n\n                        <div class="application-grid new-app-boxes-design clearfix" new-app-boxes-design-hover>\n                            <div class="application" ng-repeat="application in category.applications" ng-class="{\'new-app-hover-button\': experiment.isEnabled(\'specs.NewAppHoverButton\'), \'old-app-hover-button\': !experiment.isEnabled(\'specs.NewAppHoverButton\')}">\n                                <div class="application-content">\n                                    <div class="application-details">\n                                        <a class="app-link" ui-sref="application.overview({slug: application.slug})" open-in-modal modal-params="{{ biParams }}">\n                                            <div class="application-advert">\n                                                <img ng-src="{{application.frontPageImage | cdnResize:200:85}}" width="200" height="85" alt="{{ \'application.advertImageAltText\' | translate : { application: application.name, company: application.by } }}"/>\n                                            </div>\n                                            <h3 class="application-title" ng-class="{\'has-mobile\': application.hasMobile}">\n                                                {{application.name}}</h3>\n\n                                            <div class="application-pricing">\n                                                <application-pricing application="application"></application-pricing>\n                                            </div>\n                                            <div class="application-ratings clearfix">\n                                                <app-stats app="application"></app-stats>\n                                            </div>\n                                            <div class="application-description">\n                                                <p ng-bind-html="application.teaser"></p>\n                                            </div>\n                                        </a>\n                                        <a class="button button-orange" add-to-site app="application" ng-click="addApp(application, {origin: \'ed_market\'})">\n                                            {{ (experiment.isEnabled(\'specs.AddAppToTryItNowEditor\') ? \'application.action.tryItNow\' : \'editor.application.action.addToSite\') | translate }}\n                                        </a>\n                                    </div>\n                                </div>\n                            </div>\n                            <div style="clear: both"></div>\n                        </div>\n                    </div>\n                </div>\n                <p class="browse-more-apps"><a ui-sref="page.featured" wix-bi="2014_BACK_TO_MARKET" wix-bi-args="{ market_type: \'editor-market\', origin: \'browse-more-apps\' }">{{ \'bestApps.browseMoreApps\' | translate }}</a></p>\n            </div>\n        </div>\n    </div>\n</div>'),a.put("views/pages/main.html",'<div class="page-main">\n  <welcome-screen show-only-on-state="page.featured"></welcome-screen>\n  <div class="scroll-pane" wix-scroll-pane lr-infinite-scroll="loadMoreApps">\n    <ng-include src="\'views/includes/carousel.html\'"></ng-include>\n    <application-grid applications="applications" bi-params="biParams" on-add="addApp(application, biParamsOverride)"></application-grid>\n    <h3 ng-if="popularApplications" class="popular-applications-title" translate="category.bestByWix.name"></h3>\n    <application-grid ng-if="popularApplications" applications="popularApplications" bi-params="biParams" on-add="addApp(application, biParamsOverride)"></application-grid>\n    <div class="loading-indicator-simple" ng-class="{ visible: loading }"></div>\n  </div>\n</div>'),a.put("views/pages/pending.html",'<div ng-if="!experiment.isEnabled(\'specs.PendingAppsEditor\')" class="page-pending pending-application-list scroll-pane" wix-scroll-pane>\n  <h2 translate="category.pending.header"></h2>\n\n  <div class="application-row" ng-repeat="application in pendingAppsManager.pendingApps">\n    <div class="application-advert">\n      <a ui-sref="application.overview({ slug: application.slug })" open-in-modal><img\n        ng-src="{{application.frontPageImage}}" width="200" height="85"/></a>\n\n      <div class="application-advert-ribbon" ng-if="application.myAppData.clientSpec.appDefId || application.myAppData.clientSpec.vendorProductId"><span>{{ \'application.price.premium\' | translate }}</span></div>\n    </div>\n\n    <div class="application-details">\n      <a ui-sref="application.overview({ slug: application.slug })" open-in-modal>\n        <h3 ng-bind="application.name"></h3>\n      </a>\n\n      <div class="application-producer">\n        {{ \'application.by\' | translate }} <a target="_blank" ng-href="{{application.companyWebsite}}" ng-bind="application.by"></a>\n      </div>\n      <a class="remove" ng-if="!application.myAppData.clientSpec.vendorProductId" translate="category.pending.remove" ng-click="remove(application)"\n         wix-bi="PENDING_REMOVED" wix-bi-args="{ app_id: application.appDefinitionId }"></a>\n    </div>\n\n    <div class="application-action">\n      <button class="add-to-site" ng-click="add(application)" translate="category.pending.add"></button>\n    </div>\n  </div>\n</div>\n\n<div ng-if="experiment.isEnabled(\'specs.PendingAppsEditor\')" class="page-pending-new scroll-pane" wix-scroll-pane>\n  <h2 translate="category.pending.headerNew"></h2>\n\n  <div class="pending-application-list">\n    <div ng-repeat="application in pendingAppsManager.pendingApps">\n      <div class="application">\n        <h2 class="application-title">{{ application.name }} <span class="application-producer">{{ \'application.by\' | translate }} {{ application.by }}</span></h2>\n\n        <div class="application-advert">\n          <a ui-sref="application.overview({ slug: application.slug })" open-in-modal modal-params="{{ application.myAppData.clientSpec.appDefId ? biParamsPremium : biParams }}"><img\n            ng-src="{{application.frontPageImage}}" width="200" height="85"/></a>\n          <div class="application-advert-ribbon" ng-if="application.myAppData.clientSpec.appDefId || application.myAppData.clientSpec.vendorProductId"><span>{{ \'application.price.premium\' | translate }}</span></div>\n        </div>\n        <div class="application-description">{{ application.teaser }}</div>\n        <div class="application-actions">\n          <a class="button-orange" href="" ng-click="add(application)" translate="category.pending.add"></a>\n        </div>\n        <div class="application-actions-secondary">\n          <a ng-if="application.myAppData.clientSpec.appDefinitionId && !application.myAppData.clientSpec.vendorProductId"\n             class="application-remove-action" translate="category.pending.remove" ng-click="remove(application)"\n             wix-bi="PENDING_REMOVED" wix-bi-args="{ app_id: app.appDefinitionId, category: (application.myAppData.clientSpec.appDefId ? biParamsPremium.category : biParams.category) }"></a>\n        </div>\n      </div>\n\n      <div class="hr">\n        <hr/>\n      </div>\n    </div>\n  </div>\n</div>\n'),a.put("views/pages/permission-modal.html",'<div class="permission-modal">\n  <permission-request application="app" on-close="onClose()" on-agree="onAgree()"\n                      on-terms="onTerms()"></permission-request>\n</div>'),a.put("views/pages/search.html",'<div class="page-search-results new-search-result-design"\n     wix-scroll-pane lr-infinite-scroll="loadMoreApps">\n  <div class="inner-container">\n    <p class="search-results-title wishlist">\n      <span ng-show="searchResults === true">{{ \'search.showingResultsFor\' | translate : { totalResults: totalResults, query: query } }}</span>\n      <span ng-show="searchResults === false"><span ng-bind-html="\'wishlist.search.noMatchesFound\' | translate : { query: query }"></span><br><span ng-click="suggestAnApp(\'search_no_result\')" class="color-blue pointer" translate="wishlist.search.linkTitle"></span> {{ \'wishlist.search.browseAllApps\' | translate }}</span>\n    </p>\n\n    <div ng-if="searchResults === true"\n         ng-include="\'views/includes/application-list-new-search-results-design.html\'"></div>\n    <application-grid ng-if="searchResults === false" applications="applications" bi-params="biParams" on-add="addApp(application, biParamsOverride)"></application-grid>\n\n    <div class="loading-indicator-simple" ng-class="{ visible: loading }"></div>\n\n    <div ng-if="searchResults === true">\n        <div class="wishlist-hr"></div>\n        <div class="wishlist-icon-footer"><p class="wishlist-footer-text">{{ \'wishlist.search.stillNotFound\' | translate }} <span ng-click="suggestAnApp(\'search_results\')" class="color-blue pointer" translate="wishlist.search.linkTitle"></span></p></div>\n    </div>\n  </div>\n</div>\n'),a.put("views/pages/single.html",'<div ng-if="!experiment.isEnabled(\'specs.PendingAppsEditor\')" class="page-search-results new-search-result-design single" wix-scroll-pane>\n    <div style="margin-right: 12px">\n        <p class="search-results-title">\n            <span>{{ \'search.single\' | translate:{appName:appName} }}</span>\n        </p>\n\n        <div ng-include="\'views/includes/application-list-new-search-results-design.html\'"></div>\n    </div>\n</div>\n\n<div ng-if="experiment.isEnabled(\'specs.PendingAppsEditor\')" class="page-pending-new scroll-pane" wix-scroll-pane>\n    <h2>{{ \'search.single\' | translate:{appName:appName} }}</h2>\n\n    <div class="pending-application-list">\n        <div ng-repeat="application in applications">\n            <div class="application">\n                <h2 class="application-title">{{ application.name }} <span class="application-producer">{{ \'application.by\' | translate }} {{ application.by }}</span></h2>\n\n                <div class="application-advert">\n                    <a class="application-advert" ui-sref="application.overview({ slug: application.slug })" open-in-modal><img\n                      ng-src="{{application.frontPageImage}}" width="200" height="85"/></a>\n\n                    <div class="application-advert-ribbon" ng-if="application.myAppData.clientSpec.vendorProductId"><span>{{ \'application.price.premium\' | translate }}</span></div>\n                </div>\n                <div class="application-description">{{ application.teaser }}</div>\n                <div class="application-actions">\n                    <a class="button-orange" href="" ng-click="addApp(application)" translate="category.pending.add"></a>\n                </div>\n            </div>\n\n            <div class="hr">\n                <hr/>\n            </div>\n        </div>\n    </div>\n</div>\n');

}]);